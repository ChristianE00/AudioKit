(()=>{var e={626:e=>{async function t(e){let t=await chrome.tabs.query({});for(const a of t)await chrome.tabs.update(a.id,{muted:e})}async function a(e,t){let a=await chrome.storage.local.get("levels"),r=null;null==a.levels?r={[e]:t}:(r=a.levels,r[e]=t),await chrome.storage.local.set({levels:r})}async function r(e){let t=(await chrome.storage.local.get("levels")).levels;return!(null==t||null==t[e])}async function o(e){let t=(await chrome.storage.local.get("levels")).levels;return!await r(e)||t[e]<0?100:100*t[e]}async function s(){await chrome.offscreen.hasDocument()?console.log("Offscreen document already exists"):(console.log("Creating offscreen document"),await chrome.offscreen.createDocument({url:"offscreen.html",reasons:["USER_MEDIA"],justification:"Adjust tab audio volume"}))}async function n(){let[e]=await chrome.tabs.query({active:!0,currentWindow:!0});return e}e.exports={worker:function(e,t){return e+t},sum:function(e,t){return e+t},getTabLevel:o,containsTab:r,getCurrentTab:n},chrome.runtime.onStartup.addListener((function(){console.log("Browser opened CLEARING CACHE"),chrome.storage.local.clear()})),new Map,chrome.runtime.onMessage.addListener((async(e,i,c)=>{let l,u;switch(e.type){case"get-tab-id":l=await n(),c({data:"Here's your data!"});break;case"openPopup":console.log("[SERVICE-WORKER] Open popup message received"),chrome.action.openPopup();break;case"popup-loaded":let i=await n(),d=await o(i.id),m=await async function(){let[e]=await chrome.tabs.query({active:!0,lastFocusedWindow:!0}),t="No active tab found.",a="False",r=!1;return e?(console.log(` Title: ${e.title}`),t=e.title,e.audible&&(a="True"),r=e.mutedInfo.muted):console.log("No active tab found."),[t,a,r.toString()]}(),f=m[0],g=m[1];u=m[2],await async function(){let e=await chrome.tabs.query({}),t=[],a=[],r=[];for(const o of e)o&&(t.push(o.title),r.push(o.mutedInfo.muted.toString()),o.audible?a.push("true"):a.push("false"));return[t,a,r]}(),chrome.runtime.sendMessage({type:"popup-level",level:d,title:f,audible:g,muted:u});break;case"toggle-mute":console.log("[SERVICE-WORKER] Toggle mute message received"),u=await async function(){let[e]=await chrome.tabs.query({active:!0,lastFocusedWindow:!0}),t=!e.mutedInfo.muted;return await chrome.tabs.update(e.id,{muted:t}),t.toString()}(),chrome.runtime.sendMessage({type:"tab-muted",muted:u});break;case"mute-all":await t(!0),chrome.runtime.sendMessage({type:"tab-muted",muted:"true"});break;case"unmute-all":await t(!1),chrome.runtime.sendMessage({type:"tab-muted",muted:"false"});break;case"adjust-level":l=await n(),await async function(e,t){await s();let o=e.toString(),n=t.toString();if(await r(o))chrome.runtime.sendMessage({type:"adjust-level",target:"offscreen",tabId:e,level:t}),await a(o,n);else{const r=await chrome.tabCapture.getMediaStreamId({targetTabId:e});chrome.runtime.sendMessage({type:"start-recording",target:"offscreen",data:r,tabId:e,level:t}),await a(o,n)}await getCurrentTabTitle()}(l.id,e.level);break;case"clear-storage":await chrome.storage.local.clear();break;case"lowshelf-worker":l=await n(),await async function(e){console.log("[SERVICE-WORKER] Lowshelf function called"),await s();let t=e.toString();if(await r(t))chrome.runtime.sendMessage({type:"lowshelf",target:"offscreen",tabId:e});else{const r=await chrome.tabCapture.getMediaStreamId({targetTabId:e});chrome.runtime.sendMessage({type:"lowshelf-start",target:"offscreen",data:r,tabId:e}),await a(t,1)}}(l.id);break;case"highshelf-worker":l=await n(),await async function(e){await s();let t=e.toString();if(await r(t))chrome.runtime.sendMessage({type:"highshelf",target:"offscreen",tabId:e});else{console.log("[SERVICE-WORKER] tab not found in activeStreams W/ tabId: ",e);const r=await chrome.tabCapture.getMediaStreamId({targetTabId:e});chrome.runtime.sendMessage({type:"highshelf-start",target:"offscreen",data:r,tabId:e}),await a(t,1)}}(l.id);break;case"testSave":l=await n(),await testSave(l.id);break;case"testGet":l=await n(),await testGet(l.id);break;case"default-worker":l=await n(),await async function(e){await r(e)&&(chrome.runtime.sendMessage({type:"default",target:"offscreen",tabId:e}),await a(e,1),chrome.runtime.sendMessage({type:"popup-level",level:100}))}(l.id)}}))}},t={};!function a(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,a),s.exports}(626)})();